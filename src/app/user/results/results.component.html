<div *ngIf="combined$ | async as combined; else loading" class="container">
  <app-filter></app-filter>
  <ng-container *ngIf="userGroups.length > 1">
    <ul class="list-group list-group-horizontal mt-1 mb-2">
      <li
        type="button"
        class="list-group-item list-group-item-action text-center"
        (click)="filterGroup('AllGroups')"
      >
        All Groups
      </li>
      <li
        type="button"
        class="list-group-item list-group-item-action text-center"
        *ngFor="let group of userGroups"
        (click)="filterGroup(group.name)"
      >
        {{ group.name }}
      </li>
    </ul>
  </ng-container>

  <h4 class="text-center my-2">{{ combined.weekNumberString }}</h4>

  <table class="table shadow p-3 mb-5 bg-white table-striped">
    <thead>
      <tr>
        <td>Position</td>
        <td>
          Name
        </td>

        <td>
          Lastweek
        </td>
        <td>
          Score
        </td>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of combined.filteredUsers">
        <td>{{ user.position }}</td>
        <td>{{ user.name }}</td>
        <td>{{ user.previousWeeksScore }}</td>
        <td>{{ user.totalScore }}</td>
      </tr>
    </tbody>
  </table>
</div>

<ng-template #loading>
  <div class="d-flex justify-content-center my-5">
    <div class="spinner-border text-info" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>
</ng-template>
